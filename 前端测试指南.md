# 前端测试指南

## 🚀 启动应用

### 1. 启动后端
```bash
cd /Applications/MyDocument/7103/backend
source venv/bin/activate
python main.py
```

后端将运行在: `http://localhost:8000`

### 2. 启动前端
```bash
cd /Applications/MyDocument/7103/frontend
npm run dev
```

前端将运行在: `http://localhost:5173`

---

## 🧪 测试流程

### 完整的交互式推荐流程测试

#### 步骤1: 初始对话
1. 打开浏览器访问 `http://localhost:5173`
2. 应该看到欢迎消息
3. 在输入框输入：
   ```
   我想从上海出发去杭州玩3天，我们两个人，预算5000元，喜欢美食
   ```
4. 点击发送

**预期结果**:
- 左侧边栏显示收集到的需求信息
- Agent回复询问缺失信息（如果有）

---

#### 步骤2: 补充信息（如需要）
如果Agent询问更多信息，继续回答，例如：
```
5月1日出发
```

**预期结果**:
- 需求信息更新
- Agent继续询问直到信息完整

---

#### 步骤3: 确认需求
当Agent展示收集到的完整信息时，回复：
```
是的
```
或
```
确认
```

**预期结果**:
- Agent回复"正在为您生成行程..."
- 进入推荐阶段

---

#### 步骤4: 交通方案选择 🚗

**预期显示**:
- 看到 `TransportSelector` 组件
- 显示3个交通选项卡片（飞机、高铁、自驾）
- 每个卡片显示：
  - 交通图标
  - 交通方式名称
  - 往返费用
  - 单程时长
  - 推荐理由（蓝色框）
  - 推荐标签（如果有）

**测试操作**:
1. 点击任意交通卡片
2. 卡片应该高亮（蓝色背景）
3. 点击"确认选择"按钮

**预期结果**:
- 用户消息显示"我选择XXX"
- Agent回复进入下一阶段
- 交通选择器消失

**检查点**:
- [ ] 卡片hover效果正常
- [ ] 选中状态正确显示
- [ ] 推荐卡片有绿色边框
- [ ] 确认按钮正常工作

---

#### 步骤5: 景点安排确认 ✨

**预期显示**:
- 看到 `AttractionsSelector` 组件
- 按天分组显示景点
- 每天有彩色徽章（紫色渐变）
- 每个景点卡片显示：
  - 编号（蓝色圆圈）
  - 景点名称
  - 门票价格
  - 游览时长
  - 评分
  - 推荐理由（蓝色框）

**测试操作**:
1. 查看每天的景点安排
2. 点击"确认安排"按钮

**或者测试调整**:
1. 点击"我想调整"按钮
2. 输入调整需求，如"第一天太累了，减少一个景点"

**预期结果**:
- 确认：进入下一阶段（美食推荐）
- 调整：Agent询问具体调整需求

**检查点**:
- [ ] 景点按天正确分组
- [ ] 每天的徽章颜色正确
- [ ] 景点信息完整显示
- [ ] 两个按钮都正常工作

---

#### 步骤6: 美食推荐确认 🍜

**预期显示**:
- 看到 `FoodSelector` 组件
- 按天分组显示餐厅
- 每天有粉红色渐变徽章
- 每个餐厅卡片显示：
  - 餐型图标（🥐🍱🍽️）
  - 餐厅名称
  - 餐型标签（早餐/午餐/晚餐）
  - 菜系类型
  - 人均价格（红色）
  - 评分
  - 推荐理由（粉色框）

**测试操作**:
1. 查看每天的餐厅安排
2. 点击"确认美食安排"按钮

**或者测试调整**:
1. 点击"我想调整"按钮
2. 输入调整需求

**预期结果**:
- 确认：进入下一阶段（住宿推荐）
- 调整：Agent询问具体调整需求

**检查点**:
- [ ] 餐厅按天正确分组
- [ ] 餐型图标正确显示
- [ ] 价格红色高亮
- [ ] 推荐理由粉色框显示

---

#### 步骤7: 住宿选择 🏨

**预期显示**:
- 看到 `AccommodationSelector` 组件
- 显示多个酒店选项卡片（网格布局）
- 每个酒店卡片显示：
  - 酒店图标
  - 酒店名称
  - 星级评分
  - 位置信息
  - 入住天数
  - 每晚价格
  - 总价
  - 设施标签
  - 推荐理由（蓝色框）
  - 推荐标签（如果有，黄色背景）

**测试操作**:
1. 点击任意酒店卡片
2. 卡片应该高亮（蓝色背景）
3. 点击"确认选择"按钮

**预期结果**:
- 用户消息显示"我选择XXX酒店"
- Agent回复"正在生成最终攻略..."
- 住宿选择器消失

**检查点**:
- [ ] 酒店卡片网格布局正常
- [ ] 星级评分组件显示正确
- [ ] 推荐酒店有黄色背景
- [ ] 选中状态正确显示
- [ ] 总价计算正确

---

#### 步骤8: 查看最终攻略 📋

**预期显示**:
- 看到完整的行程卡片
- 包含以下部分：
  1. **基本信息**: 目的地、出发地、时长、预算、人数
  2. **交通方案**: 去程和返程的交通详情
  3. **每日行程**: 
     - 日期徽章
     - 活动列表（景点、餐厅）
     - 每个活动的时间、类型、名称、费用
  4. **预算分配**: 
     - 交通、景点、餐饮、住宿分类
     - 每项金额和百分比
     - 进度条可视化
     - 总计（红色高亮）

**检查点**:
- [ ] 所有信息完整显示
- [ ] 交通方案包含去程和返程
- [ ] 每日行程按天分组
- [ ] 活动图标正确（🏛️🍜🍽️等）
- [ ] 预算分类显示中文
- [ ] 预算进度条正确
- [ ] 总预算红色高亮

---

## 🎨 UI测试

### 响应式测试

#### 桌面端 (>1024px)
- [ ] 侧边栏和主内容区域并排显示
- [ ] 交通卡片3列网格
- [ ] 酒店卡片2-3列网格
- [ ] 所有文字清晰可读

#### 平板端 (768px - 1024px)
- [ ] 侧边栏和主内容区域并排显示
- [ ] 交通卡片2列网格
- [ ] 酒店卡片2列网格

#### 移动端 (<768px)
- [ ] 侧边栏隐藏或折叠
- [ ] 所有卡片单列显示
- [ ] 触摸操作流畅
- [ ] 按钮大小适合触摸

### 交互效果测试

#### Hover效果
- [ ] 卡片hover时边框变色
- [ ] 卡片hover时显示阴影
- [ ] 卡片hover时轻微上移
- [ ] 按钮hover时颜色变化

#### 选中状态
- [ ] 选中卡片背景渐变
- [ ] 选中卡片边框高亮
- [ ] 选中卡片阴影增强
- [ ] 按钮状态正确（已选择/选择此方案）

#### 动画效果
- [ ] 页面切换流畅
- [ ] 消息滚动流畅
- [ ] 加载动画正常
- [ ] 过渡效果自然

---

## 🐛 常见问题排查

### 问题1: 选择器不显示

**症状**: 点击确认后没有看到选择器组件

**排查步骤**:
1. 打开浏览器开发者工具（F12）
2. 查看Console是否有错误
3. 查看Network标签，检查API响应
4. 确认响应中包含 `recommendation` 字段

**解决方法**:
- 检查后端是否正确返回推荐数据
- 检查前端是否正确解析 `message.recommendation`

---

### 问题2: 点击确认没有反应

**症状**: 点击确认按钮后没有发送消息

**排查步骤**:
1. 检查Console是否有JavaScript错误
2. 检查是否选中了选项（某些选择器需要先选中）
3. 检查Network标签，看是否发送了请求

**解决方法**:
- 确保选中了选项再点击确认
- 检查 `handleSelection` 方法是否正确绑定

---

### 问题3: 样式显示异常

**症状**: 卡片布局错乱或样式缺失

**排查步骤**:
1. 检查Element Plus是否正确加载
2. 检查SCSS是否编译成功
3. 清除浏览器缓存

**解决方法**:
```bash
# 重新安装依赖
cd frontend
rm -rf node_modules
npm install

# 重启开发服务器
npm run dev
```

---

### 问题4: 后端连接失败

**症状**: 前端显示"发送失败，请重试"

**排查步骤**:
1. 检查后端是否正在运行
2. 检查后端端口是否为8000
3. 检查CORS配置

**解决方法**:
```bash
# 确保后端运行
cd backend
source venv/bin/activate
python main.py
```

---

## 📊 测试数据

### 测试用例1: 杭州3日游（美食偏好）
```
我想从上海出发去杭州玩3天，我们两个人，预算5000元，喜欢美食
```

**预期**:
- 推荐高铁（快速便捷）
- 景点包含茅家埠（美食街）
- 餐厅推荐杭帮菜
- 酒店靠近美食区域

---

### 测试用例2: 南京5日游（文化偏好）
```
我想从北京出发去南京玩5天，一个人，预算8000元，喜欢历史文化
```

**预期**:
- 推荐飞机或高铁
- 景点包含中山陵、夫子庙
- 推荐文化主题餐厅
- 酒店靠近景点

---

### 测试用例3: 广州周末游（购物偏好）
```
我想从深圳出发去广州玩2天，情侣出行，预算3000元，喜欢购物
```

**预期**:
- 推荐高铁（距离近）
- 景点包含购物中心
- 推荐特色餐厅
- 酒店位置便利

---

## ✅ 测试完成清单

### 功能测试
- [ ] 完整流程测试（需求收集 → 推荐 → 生成攻略）
- [ ] 交通选择器功能
- [ ] 景点选择器功能
- [ ] 美食选择器功能
- [ ] 住宿选择器功能
- [ ] 修改/调整功能
- [ ] 重置对话功能

### UI测试
- [ ] 桌面端布局
- [ ] 平板端布局
- [ ] 移动端布局
- [ ] Hover效果
- [ ] 选中状态
- [ ] 动画效果

### 兼容性测试
- [ ] Chrome
- [ ] Safari
- [ ] Firefox
- [ ] Edge
- [ ] 移动端浏览器

### 性能测试
- [ ] 页面加载速度
- [ ] 消息滚动流畅度
- [ ] 大量数据渲染性能

---

## 📝 测试报告模板

```markdown
## 测试报告

**测试日期**: 2025-11-18
**测试人员**: [姓名]
**测试环境**: 
- 浏览器: Chrome 120
- 操作系统: macOS 14
- 屏幕尺寸: 1920x1080

### 测试结果

#### 功能测试
- ✅ 需求收集流程正常
- ✅ 交通选择器正常
- ✅ 景点选择器正常
- ✅ 美食选择器正常
- ✅ 住宿选择器正常
- ✅ 最终攻略生成正常

#### UI测试
- ✅ 桌面端布局正常
- ⚠️ 移动端部分文字过小（需优化）
- ✅ Hover效果正常
- ✅ 动画流畅

#### 发现的问题
1. 移动端景点卡片文字过小
2. 预算进度条在Safari中显示异常

#### 建议
1. 增大移动端字体
2. 修复Safari兼容性问题
```

---

**文档版本**: v1.0  
**更新时间**: 2025-11-18  
**状态**: ✅ 可用

