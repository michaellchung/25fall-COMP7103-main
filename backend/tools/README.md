# Toolæ¥å£æ–‡æ¡£

## æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†4ä¸ªtoolæ¥å£ï¼Œç”¨äºæ™ºèƒ½æ—…æ¸¸æ”»ç•¥ç”Ÿæˆçš„æ¨ç†æµç¨‹ã€‚

## æ¨ç†é€»è¾‘æµç¨‹

```
1. ç”¨æˆ·è¾“å…¥åˆ†æ â†’ æç¤ºè¡¥å…¨ç”¨æˆ·éœ€æ±‚æ¨¡å‹ï¼ˆæ—¶é—´ï¼Œåå¥½ç­‰ï¼‰âœ…
2. ç¡®è®¤ç”¨æˆ·éœ€æ±‚æ¨¡å‹ âœ…
3. ç”Ÿæˆæ”»ç•¥ï¼š
   3.1 Tool1: æŸ¥è¯¢å‡ºå‘åœ°åˆ°ç›®çš„åœ°äº¤é€š
   3.2 Tool2: æŸ¥è¯¢æ™¯ç‚¹ï¼ˆåŸºäºå‘é‡æ•°æ®åº“ï¼‰
   3.3 Tool3: æŸ¥è¯¢ç¾é£Ÿé¤å…
   3.4 Tool4: æŸ¥è¯¢ä½å®¿é…’åº—
   3.5 LLMå†³ç­–ï¼šæ ¹æ®ç”¨æˆ·åå¥½ã€é¢„ç®—ã€è·ç¦»ç”Ÿæˆæ¯æ—¥è¡Œç¨‹
```

## Tool 1: äº¤é€šæŸ¥è¯¢å·¥å…· (transport.py)

### åŠŸèƒ½
æŸ¥è¯¢å‡ºå‘åœ°åˆ°ç›®çš„åœ°çš„äº¤é€šæ–¹å¼ï¼ˆé£æœºã€åˆ—è½¦ï¼‰

### æ¥å£
```python
from tools.transport import get_transport_tool

tool = get_transport_tool()
result = tool.query_transport(
    departure_city="åŒ—äº¬",      # å‡ºå‘åŸå¸‚
    destination_city="æ­å·",    # ç›®çš„åœ°åŸå¸‚
    date=None,                 # å‡ºå‘æ—¥æœŸï¼ˆå¯é€‰ï¼‰
    time_period=None,          # æ—¶é—´æ®µï¼ˆå¯é€‰ï¼‰
    companions_count=2,        # å‡ºè¡Œäººæ•°
    top_k=3                    # è¿”å›ç»“æœæ•°é‡
)
```

### è¿”å›æ•°æ®æ ¼å¼
```python
[
    {
        "method": "é£æœº",
        "duration_hours": 2.5,
        "cost_per_person": 800,
        "departure_time": "09:00",
        "arrival_time": "11:30",
        "description": "ä»åŒ—äº¬åˆ°æ­å·çš„èˆªç­ï¼Œæœ€å¿«æ·çš„é€‰æ‹©",
        "details": {
            "flight_number": "CA1234",
            "airline": "å›½èˆª/ä¸œèˆª",
            "airport": "åŒ—äº¬æœºåœº â†’ æ­å·è§å±±å›½é™…æœºåœº",
            "total_cost": 1600,
            "booking_tip": "æå‰7-15å¤©é¢„è®¢ä»·æ ¼æ›´ä¼˜æƒ "
        }
    }
]
```

### Mockæ•°æ®
ç›®å‰è¿”å›æ­å·çš„Mockæ•°æ®ï¼Œæ”¯æŒä»åŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ã€æ·±åœ³ã€å—äº¬ã€è‹å·ç­‰åŸå¸‚å‡ºå‘ã€‚

---

## Tool 2: æ™¯ç‚¹æŸ¥è¯¢å·¥å…· (attraction.py)

### åŠŸèƒ½
åŸºäºå‘é‡æ•°æ®åº“æŸ¥è¯¢æ™¯ç‚¹ä¿¡æ¯

### æ¥å£
```python
from tools.attraction import get_attraction_tool

tool = get_attraction_tool()
result = tool.query_attractions(
    city="æ­å·",                    # åŸå¸‚
    ticket_price_max=1000,         # æœ€é«˜é—¨ç¥¨ä»·æ ¼
    time_point=None,               # æ—¶é—´ç‚¹ï¼ˆå¯é€‰ï¼‰
    location_range=None,           # ä½ç½®èŒƒå›´ï¼ˆå¯é€‰ï¼‰
    rating_min=4.0,                # æœ€ä½è¯„åˆ†
    preferences=["æ–‡åŒ–", "ç¾é£Ÿ"],   # åå¥½æ ‡ç­¾
    top_k=10                       # è¿”å›æ•°é‡
)
```

### è¿”å›æ•°æ®æ ¼å¼
```python
[
    {
        "name": "è¥¿æ¹–",
        "city": "æ­å·",
        "category": ["è‡ªç„¶é£å…‰", "å†å²æ–‡åŒ–"],
        "rating": 4.8,
        "ticket_price": 0,
        "duration_hours": 3.0,
        "location": {
            "lat": 30.2591,
            "lng": 120.1353,
            "address": "æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºè¥¿æ¹–é£æ™¯åèƒœåŒº"
        },
        "description": "è¥¿æ¹–æ˜¯æ­å·çš„æ ‡å¿—æ€§æ™¯ç‚¹...",
        "tags": ["å¿…æ¸¸", "å…è´¹", "é€‚åˆæ‹ç…§", "ä¸–ç•Œæ–‡åŒ–é—äº§"],
        "opening_hours": "å…¨å¤©å¼€æ”¾",
        "best_season": ["æ˜¥å­£", "ç§‹å­£"]
    }
]
```

### Mockæ•°æ®
åŒ…å«æ­å·10ä¸ªçƒ­é—¨æ™¯ç‚¹ï¼šè¥¿æ¹–ã€çµéšå¯ºã€é›·å³°å¡”ã€è¥¿æºªæ¹¿åœ°ã€åƒå²›æ¹–ã€å®‹åŸã€æ²³åŠè¡—ã€é£æ¥å³°ã€é¾™äº•æ‘ã€æ­å·åšç‰©é¦†ã€‚

---

## Tool 3: ç¾é£ŸæŸ¥è¯¢å·¥å…· (food.py)

### åŠŸèƒ½
æŸ¥è¯¢ç›®çš„åœ°çš„ç¾é£Ÿé¤å…

### æ¥å£
```python
from tools.food import get_food_tool

tool = get_food_tool()
result = tool.query_restaurants(
    city="æ­å·",                   # åŸå¸‚
    category="æ­å¸®èœ",             # ç±»åˆ«ï¼ˆå¯é€‰ï¼‰
    preferences=["ç¾é£Ÿ"],          # åå¥½ï¼ˆå¯é€‰ï¼‰
    price_max=200,                # æœ€é«˜äººå‡ä»·æ ¼
    rating_min=4.0,               # æœ€ä½è¯„åˆ†
    location_range=None,          # ä½ç½®èŒƒå›´ï¼ˆå¯é€‰ï¼‰
    top_k=5                       # è¿”å›æ•°é‡
)
```

### è¿”å›æ•°æ®æ ¼å¼
```python
[
    {
        "name": "å¤–å©†å®¶ï¼ˆæ¹–æ»¨åº—ï¼‰",
        "city": "æ­å·",
        "cuisine_type": "æ­å¸®èœ",
        "rating": 4.6,
        "avg_price": 80,
        "location": {
            "lat": 30.2547,
            "lng": 120.1619,
            "address": "æµ™æ±Ÿçœæ­å·å¸‚ä¸ŠåŸåŒºæ¹–æ»¨è·¯53å·"
        },
        "signature_dishes": ["è¥¿æ¹–é†‹é±¼", "é¾™äº•è™¾ä»", "ä¸œå¡è‚‰"],
        "description": "æ­å·çŸ¥åè¿é”é¤å…ï¼Œä¸»æ‰“æ­å¸®èœ...",
        "opening_hours": "11:00-21:30",
        "tags": ["å¿…åƒ", "é«˜æ€§ä»·æ¯”", "è¿é”å“ç‰Œ"]
    }
]
```

### Mockæ•°æ®
åŒ…å«æ­å·8å®¶ç‰¹è‰²é¤å…ï¼šå¤–å©†å®¶ã€æ¥¼å¤–æ¥¼ã€çŸ¥å‘³è§‚ã€ç»¿èŒ¶é¤å…ã€å¥å…ƒé¦†ã€æ–°ç™½é¹¿ã€èƒ¡åº†ä½™å ‚è¯è†³ã€å—å®‹å¾¡è¡—å°åƒã€‚

---

## Tool 4: ä½å®¿æŸ¥è¯¢å·¥å…· (accommodation.py)

### åŠŸèƒ½
æŸ¥è¯¢ç›®çš„åœ°çš„é…’åº—ä½å®¿

### æ¥å£
```python
from tools.accommodation import get_accommodation_tool

tool = get_accommodation_tool()
result = tool.query_hotels(
    city="æ­å·",                  # åŸå¸‚
    companions_count=2,          # å…¥ä½äººæ•°
    price_max=500,              # æœ€é«˜æ¯æ™šä»·æ ¼
    location_range=None,        # ä½ç½®èŒƒå›´ï¼ˆå¯é€‰ï¼‰
    rating_min=4.0,             # æœ€ä½è¯„åˆ†
    top_k=5                     # è¿”å›æ•°é‡
)
```

### è¿”å›æ•°æ®æ ¼å¼
```python
[
    {
        "name": "äºšæœµé…’åº—ï¼ˆè¥¿æ¹–åº—ï¼‰",
        "city": "æ­å·",
        "hotel_type": "èˆ’é€‚å‹",
        "rating": 4.6,
        "price_per_night": 420,
        "location": {
            "lat": 30.2518,
            "lng": 120.1448,
            "address": "æµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–åŒºåŒ—å±±è¡—58å·"
        },
        "facilities": ["WiFi", "æ—©é¤", "å¥èº«æˆ¿", "å›¾ä¹¦é¦†", "ä¸‹åˆèŒ¶"],
        "room_type": "èˆ’é€‚å¤§åºŠæˆ¿",
        "description": "æ–°å‹äººæ–‡é…’åº—ï¼Œæä¾›å…è´¹å›¾ä¹¦å’Œä¸‹åˆèŒ¶...",
        "tags": ["äººæ–‡é…’åº—", "æœåŠ¡å¥½", "è¿‘è¥¿æ¹–"]
    }
]
```

### Mockæ•°æ®
åŒ…å«æ­å·8å®¶é…’åº—ï¼Œæ¶µç›–é«˜æ¡£å‹ã€èˆ’é€‚å‹ã€ç»æµå‹ï¼šè¥¿æ¹–å›½å®¾é¦†ã€æŸ³èºé‡Œé…’åº—ã€å¼€å…ƒåéƒ½ã€å¦‚å®¶ã€æ±‰åº­ã€å…¨å­£ã€é”¦æ±Ÿä¹‹æ˜Ÿã€äºšæœµã€‚

---

## é›†æˆä½¿ç”¨ç¤ºä¾‹

åœ¨è¡Œç¨‹ç”Ÿæˆå™¨ä¸­çš„é›†æˆä½¿ç”¨ï¼š

```python
from planner.itinerary_generator import get_itinerary_generator

generator = get_itinerary_generator()
itinerary = generator.generate_itinerary(
    destination="æ­å·",
    days=3,
    budget=5000,
    preferences=["æ–‡åŒ–", "ç¾é£Ÿ"],
    attractions=[],
    companions="æƒ…ä¾£",
    companions_count=2,
    departure_city="åŒ—äº¬"
)
```

ç”Ÿæˆçš„è¡Œç¨‹ä¼šåŒ…å«ï¼š
- **äº¤é€šæ–¹æ¡ˆ** (Tool 1)ï¼šå»ç¨‹/è¿”ç¨‹æ¨èåŠå¤‡é€‰æ–¹æ¡ˆ
- **æ¯æ—¥è¡Œç¨‹** (Tool 2 + Tool 3)ï¼šæ™¯ç‚¹å®‰æ’ + é¤é¥®æ¨è
- **ä½å®¿ä¿¡æ¯** (Tool 4)ï¼šæ¨èé…’åº—åŠå¤‡é€‰æ–¹æ¡ˆ
- **é¢„ç®—åˆ†æ**ï¼šäº¤é€šã€é—¨ç¥¨ã€é¤é¥®ã€ä½å®¿ã€å…¶ä»–è´¹ç”¨çš„è¯¦ç»†åˆ†è§£
- **æ—…è¡Œå»ºè®®**ï¼šæ ¹æ®ç”¨æˆ·åå¥½å’ŒåŒè¡Œç±»å‹ç”Ÿæˆçš„è´´å¿ƒæç¤º

---

## æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
# æµ‹è¯•å®Œæ•´æ¨ç†é€»è¾‘ï¼ˆä¸ä¾èµ–LLMï¼‰
python test/test_tools_inference.py

# æµ‹è¯•4ä¸ªtoolå•ç‹¬åŠŸèƒ½
python test/test_agent_with_tools.py
```

---

## éªŒè¯ç»“æœ

âœ… Tool 1 äº¤é€šå·²è°ƒç”¨  
âœ… Tool 2 æ™¯ç‚¹å·²è°ƒç”¨  
âœ… Tool 3 ç¾é£Ÿå·²è°ƒç”¨  
âœ… Tool 4 ä½å®¿å·²è°ƒç”¨  
âœ… LLMå†³ç­–å®Œæˆï¼ˆæ¯æ—¥è¡Œç¨‹ï¼‰  
âœ… é¢„ç®—è®¡ç®—æ­£ç¡®  

ğŸ‰ æ‰€æœ‰éªŒè¯ç‚¹é€šè¿‡ï¼æ¨ç†Agentå·¥ä½œæ­£å¸¸ï¼

---

## æ‰©å±•æ–¹å‘

1. **Tool 1**: æ¥å…¥12306 APIæˆ–æºç¨‹APIè·å–å®æ—¶ç¥¨ä»·
2. **Tool 2**: æ„å»ºçœŸå®çš„å‘é‡æ•°æ®åº“ï¼ˆChromaDB + Embeddingï¼‰
3. **Tool 3**: æ¥å…¥é«˜å¾·åœ°å›¾POI APIæˆ–çˆ¬å–å¤§ä¼—ç‚¹è¯„æ•°æ®
4. **Tool 4**: çˆ¬å–æºç¨‹/å»å“ªå„¿é…’åº—æ•°æ®
5. **è·¯çº¿ä¼˜åŒ–**: æ·»åŠ Tool 5å®ç°å¸‚å†…äº¤é€šè·¯çº¿ä¼˜åŒ–ï¼ˆTSPç®—æ³•ï¼‰

---

**æ›´æ–°æ—¶é—´**: 2025-11-19  
**ç‰ˆæœ¬**: v1.0

